function renderTabstable(t){if(!t||"string"!=typeof t)return"";const n=t.split(/\r?\n/).map((t=>t.trimEnd()));let e=[],r=!1;for(let t=0;t<n.length;t++){const l=n[t];if("|!|"!==l){if(r&&""===l)break;r&&e.push(l)}else r=!0}if(0===e.length)return"";const[l,...a]=e;function s(t){let n="",e="",r=t.trim();"^|"===r&&(r="");let l=r.match(/(.*?)\s+!([0-9]+)(>>|<<)\s*$/);if(l){r=l[1].trim();const t=parseInt(l[2],10)||1;">>"===l[3]?n=` colspan="${t}"`:"<<"===l[3]&&(e=` rowspan="${t}"`)}return{text:r,colspan:n,rowspan:e}}let o=l.split(/\t+/).map((t=>t.trim()));o=o.filter((t=>t.length>0||"^|"===t));const i=o.map((t=>{const n=s(t);let e=n.text,r="left";return/^:.*:$/.test(e)?(r="center",e=e.replace(/^:(.*):$/,"$1")):/^:/.test(e)?e=e.replace(/^:/,""):/:$/.test(e)&&(r="right",e=e.replace(/:$/,"")),{text:e,align:r,colspan:n.colspan,rowspan:n.rowspan}}));let c="<table>\n";return c+="<thead><tr>",i.forEach((t=>{const n=t.align?` align="${t.align}"`:"";c+=`<th${t.colspan}${n}>${t.text}</th>`})),c+="</tr></thead>\n",c+="<tbody>\n",a.forEach((t=>{c+="<tr>";const n=function(t){let n=t.split(/\t+/).map((t=>t.trim()));return n=n.filter((t=>t.length>0||"^|"===t)),n.map(s)}(t);n.forEach(((t,n)=>{let e="";i[n]&&i[n].align&&(e=` align="${i[n].align}"`),c+=`<td${t.colspan}${t.rowspan}${e}>${t.text}</td>`})),c+="</tr>\n"})),c+="</tbody>\n",c+="</table>",c}
window.renderTabstable = renderTabstable;